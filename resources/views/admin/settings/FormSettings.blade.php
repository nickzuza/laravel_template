@extends('admin.layouts')@section('content')    <style>        textarea{            height: 70px !important;        }        .phone        {            margin-bottom: 3px;        }    </style>    <div class="box box-primary">        <div class="box-body">            <div class="page-header">                @lang('admin.settings')            </div>            <div class="box-body pad table-responsive">            <div  class="content_settings" style="max-width: 600px">                @if(session('success'))                    <div class="alert alert-success fade in " id="alert-message" style="font-size: 14px;">                        <a class="close" href="#" data-dismiss="alert">x</a>                        <i class="fa fa-check-circle"></i>                        {!! session('success') !!}                        {!! Session::forget('success') !!}                    </div>                    @endif                    {!! Form::open(['files' => true])!!}                    <div class="modal-body">                        <div class="form-group row">                            <label>@lang('admin.name_project')</label>                            <?php                            $data = isset( $settings )? $settings->name_project : '';                            $data  = old('name_project', $data );                            ?>                            <input type="text" name="name_project" required value="{!!$data!!}" class="form-control">                        </div>{{--Sales Email--}}                        <div class="form-group row">                            <label>@lang('admin.defaul_email')</label>                            <?php                            $data = isset( $settings )? $settings->default_email: '';                            $data  = old('default_email', $data );                            ?>                            <input type="email" name="default_email" required value="{!!$data!!}" class="form-control">                        </div>{{--Sales Email--}}                        <div class="form-group row">                            <label>@lang('admin.email_sales')</label>                            <?php                                $data = isset( $settings )? $settings->email_sales : '';                                $data  = old('email_sales', $data );                            ?>                            <input type="email" name="email_sales" required value="{!!$data!!}" class="form-control">                        </div>{{--Sales Email--}}                        <div class="form-group row">                            <label>@lang('admin.email_to_notification')</label>                            <?php                                $data = isset( $settings )? $settings->email_notification : '';                                $data  = old('email_notification', $data );                            ?>                            <input type="text" name="email_notification" required value="{!!$data!!}" class="form-control ">                            <span class="has_errors errors" style="display: none">@lang('admin.error_list_email')</span>                        </div>{{--Default Email--}}                        <div class="form-group row">                            <?php                            $data = isset( $settings )? $settings->phone:'';                            $data = old('phone',$data);                            $data2 = isset( $settings )? $settings->prefix_phone:'';                            $data2 = old('prefix_phone',$data2);                            ?>                            {{--<label for="sort_order" class="col-sm-2 control-label">{!! trans('admin.phone') !!} (2) </label>--}}                            <div class="col-sm-12" style="padding: 0px;"  @if($errors->has('phone')) id="has_errors" @endif>                                <div class="col-md-2" style="padding-left: 0px; padding-right: 0px">                                    <label>@lang('admin.prefix')</label>                                    <input type="text" name="prefix_phone" value="{{$data2}}"  class="form-control prefix" >                                </div>                                <div class="col-md-10" style="padding-right: 0px">                                    <label>@lang('admin.phone_internet')</label>                                    <input type="text"  name="phone"   value="{!! $data !!}" class="form-control number">                                </div>                                {{--<input type="text" value="{{$data}}" id="number" name="phone2" class="form-control" />--}}                                <span class="errors">{!!  $errors->first('phone') !!}</span>                            </div>                        </div>                        <div class="form-group row">                            <?php                            $data = isset( $settings )? $settings->phone2:'';                            $data = old('phone2',$data);                            $data2 = isset( $settings )? $settings->prefix_phone2:'';                            $data2 = old('prefix_phone2',$data2);                            ?>                            {{--<label for="sort_order" class="col-sm-2 control-label">{!! trans('admin.phone') !!} (3) </label>--}}                            <div class="col-sm-12" style="padding: 0px" @if($errors->has('phone2')) id="has_errors"  @endif>                                <div class="col-md-2" style="padding-left: 0px; padding-right: 0px">                                    <label>@lang('admin.prefix')</label>                                    <input type="text" name="prefix_phone2" value="{{$data2}}"  class="form-control prefix" >                                </div>                                <div class="col-md-10" style="padding-right: 0px">                                    <label>@lang('admin.phone_bug')</label>                                    <input type="text"  name="phone2"   value="{!! $data !!}" class="form-control number">                                </div>                                <span class="errors">{!!  $errors->first('phone2') !!}</span>                            </div>                        </div>                        <div class="form-group row">                            <label>@lang('admin.new_product')</label>                            <?php                                $data = isset( $settings )? $settings->new : '';                                $data  = old('new', $data );                            ?>                            <input type="number" name="new" required value="{!! $data !!}" class="form-control">                        </div>{{--new_product--}}                        <div class="form-group row">                            <label>@lang('admin.hit')</label>                            <?php                            $data = isset( $settings )? $settings->hit: '';                            $data  = old('hit', $data );                            ?>                            <input type="number" name="hit" required value="{!! $data !!}" class="form-control">                        </div>{{--hit--}}                        <div class="form-group row">                            <label>@lang('admin.delivery_limit')</label>                            <?php                            $data = isset( $settings )? $settings->delivery_limit : '';                            $data  = old('delivery_limit', $data );                            ?>                            <input type="number" id="number" name="delivery_limit" required value="{!! $data !!}" class="form-control">                        </div>{{--new_product--}}                        <div class="form-group row">                            <label>@lang('admin.delivery')</label>                            <?php                            $data = isset( $settings )? $settings->delivery: '';                            $data  = old('delivery', $data );                            ?>                            <input type="number" id="number" name="delivery" required value="{!! $data !!}" class="form-control">                        </div>{{--new_product--}}                    </div><!-- nav-tabs-custom -->                    <?php $langs = ['ru','ro']?>                    <div class="nav-tabs-custom">                        <ul class="nav nav-tabs">                            <?php $inc = 0 ?>                            @foreach($langs as $lang)                                <li class="@if(! $inc ) active @endif">                                    <a href="#tab_{!! $lang!!}" data-toggle="tab">                                        {!! HTML::image("adminLTE/images/icon-".$lang.".png") !!}                                    </a>                                    <?php $inc++;?>                                </li>                            @endforeach                        </ul>                        <div class="tab-content">                            <?php $inc = 0?>                            @foreach($langs as $lang)                                <?php                                $address = 'address_'.$lang;                                $graffic = 'graffic_'.$lang;                                ?>                                <div class="tab-pane @if(! $inc ) active @endif" id="tab_{!! $lang!!}">                                    <div class="form-group row">                                        <?php                                            $data = isset( $settings )? $settings->$address:'';                                            $data = old($address,$data);                                        ?>                                        <label for="{{$address}}" class="control-label">{!! trans('admin.address') !!}</label>                                        <div class="" @if($errors->has($address)) id="has_errors" @endif>                                            <input maxlength="150"  type="text" required value="{{$data}}" name="{!! $address!!}" class="form-control" />                                            <span class="errors">{!!  $errors->first($address) !!}</span>                                        </div>                                    </div>                                    <div class="form-group row">                                        <?php                                            $data = isset( $settings )? $settings->$graffic:'';                                            $data = old($graffic,$data);                                        ?>                                        <label for="{{$graffic}}" class="control-label">{!! trans('admin.grafic') !!}</label>                                        <div class="" @if($errors->has($graffic))  id="has_errors" @endif>                                            <textarea  maxlength="200" name="{!! $graffic!!}" class="form-control" />{{$data}}</textarea>                                            <span class="errors">{!!  $errors->first($graffic) !!}</span>                                        </div>                                    </div>                                </div>                                <?php $inc++;?>                            @endforeach           </div>               <div class="modal-footer" style="max-width: 600px">                    <input type="submit" value="{!! trans('admin.save') !!}" class="btn btn-primary" style="width: 230px; float: right; padding: 10px 0px ">                </div>                            </div>                {!! Form::close() !!}            </div>        </div>    </div>@stop@section('script')    <script>        $(".number").keydown(function (e) {            console.log(e.keyCode);            // Allow: backspace, delete, tab, escape, enter and .            if ($.inArray(e.keyCode, [8, 9, 27, 13, 110, 190,95,45,189,32,109,46]) !== -1 ||                // Allow: Ctrl/cmd+A                (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: Ctrl/cmd+C                (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: Ctrl/cmd+X                (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: home, end, left, right                (e.keyCode >= 35 && e.keyCode <= 39)) {                // let it happen, don't do anything                return;            }            // Ensure that it is a number and stop the keypress            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {                e.preventDefault();            }        });        $(".prefix").keydown(function (e) {            console.log(e.keyCode);            // Allow: backspace, delete, tab, escape, enter and .            if ($.inArray(e.keyCode, [8, 9, 27, 13, 110, 190,95,45,187,107,57,48,46]) !== -1 ||                // Allow: Ctrl/cmd+A                (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: Ctrl/cmd+C                (e.keyCode == 67 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: Ctrl/cmd+X                (e.keyCode == 88 && (e.ctrlKey === true || e.metaKey === true)) ||                // Allow: home, end, left, right                (e.keyCode >= 35 && e.keyCode <= 39)) {                // let it happen, don't do anything                return;            }            // Ensure that it is a number and stop the keypress            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {                e.preventDefault();            }        });    </script>    <script>        $('form').submit(function (event) {            event.preventDefault();              var  $email_string = $(this).find('input[name="email_notification"]').val();              var $spliting =  $email_string.split(",");            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;              var x = $(this);              var flag = true;              $($spliting).each(function () {                  if($(this).length> 0 ) {                      if(!re.test($.trim(this))){                          $('.has_errors').show();                        flag = false                     }                  }              });              if(flag){                  x[0].submit();              }        });    </script>@stop