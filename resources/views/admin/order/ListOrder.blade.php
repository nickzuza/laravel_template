@extends('admin.layouts')@section('content') <?php $name = 'name_' . Lang::getLocale(); ?><div class="box">    <div class="box-body">        <div class="page-header" id="product_ajax"> {!! trans('admin.orders') !!} </div>        <div class="errors"> @if(session('success'))                <div class="alert alert-success fade in " id="alert-message"><a class="close" href=""                                                                                data-dismiss="alert">x</a> <i                            class="fa fa-check-circle"></i> {!! session('success') !!} {!! Session::forget('success') !!}                </div> @endif </div>        <div class="page-body">            <div class="well">                <div class="row">                    {{Form::open(['id'=>'form_filtre'])}}                    <div class="col-sm-4">                            <div class="form-group"><label for="filter_name">@lang('admin.id_order')</label>                                <input type="text" name="order_id" autocomplete="off" class="form-control" placeholder="@lang('admin.id_order')"></div>                            <div class="form-group"><label for="model">@lang('admin.name_customer')</label> <input type="text" name="name_customer" autocomplete="off" class="form-control" placeholder="@lang('admin.name_customer')">                            </div>                        </div>                        <div class="col-sm-4">                            <div class="form-group"><label for="price">@lang('admin.date_min')</label>                                <input type="text" name="filter_date_min" autocomplete="off" class="form-control date" placeholder="@lang('admin.date_min')">                            </div>                            <div class="form-group"><label for="price">@lang('admin.date_max')</label>                                <input type="text" name="filter_date_max" autocomplete="off" class="form-control date" placeholder="@lang('admin.date_max')"></div>                        </div>                        <div class="col-sm-4">                            <div class="form-group"><label for="price">Статус</label> <select name="filter_status" id="select" class="form-control">                                     <option value="">-</option>                                    @foreach($status as $item)                                            <option value="{{$item->id}}">{{$item->$name}}</option>                                    @endforeach                                </select></div>                            <button type="button" id="button-filter" onclick="filter(1)" class="btn btn-primary pull-right"><i class="fa fa-search"></i> Фильтровать</button>                        </div>                   {{Form::close()}}            </div>            </div>            <table class="table table-bordered">                <thead>                <tr>                    <th> {!! trans('admin.id_order') !!} </th>                    <th> {!! trans('admin.name_customer') !!} </th>                    <th> {!! trans('admin.total') !!} </th>                    <th> {!! trans('admin.data') !!} </th>                    <th> {!! trans('admin.data_modified') !!} </th>                    <th> {!! trans('admin.status') !!} </th>                    <th> {!! trans('admin.actions') !!} </th>                </tr>                </thead>                <tbody class="order_list"> @foreach( $orders as $order)                    <tr @if($order->show)style="background: #cfeacf;" @endif>                        <td> {!! $order->id!!} </td>                        <td> {!! $order->name !!} </td>                        <td> {!! $order->total !!} @lang('admin.mdl') </td>                        <?php                        $dt =  new \DateTime($order->created_at);                        ?>                        <td> {!! $dt->format('d.m.Y') !!} </td>                        <?php                        $dt =  new \DateTime($order->updated_at);                        ?>                        <td> {!! $dt->format('d.m.Y') !!} </td>                        <td> @foreach($status as $item) @if($item->id == $order->order_status_id) {!! $item->$name !!} @endif @endforeach </td>                        <td style="vertical-align: middle"><a href="{!! URL::route('order_show', $order->id) !!}">                                <button class="btn btn-xs btn-info" data-toggle="modal"><i                                            class="fa fa-info-circle"></i></button>                            </a> <a href="{!! URL::route('order_edit', $order->id) !!}">                                <button class="btn btn-xs btn-primary" data-toggle="modal"><i class="fa fa-pencil"></i>                                </button>                            </a>                            <button class="delete-trash btn btn-danger btn-xs" data-toggle="modal"><i                                        class="glyphicon glyphicon-trash"                                        onclick="deleteProducts('{{$order->id}}','{{$order->id}}')"></i></button>                        </td>                    </tr> @endforeach </tbody>                <div class="modal fade delete_dialog" role="dialog">                    <div class="modal-dialog modal-sm">                        <div class="modal-content">                            <div class="modal-header">                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                            aria-hidden="true">&times;</span></button>                                <h4 class="modal-title"></h4></div>                            <div class="modal-body"> {{ trans('admin.sure-delete') }} - <strong                                        class="modal_name"> </strong> ?                            </div>                            <div class="modal-footer">                                <div class="clearfix"></div> {!! Form::open(['method' => 'DELETE']) !!} {!! Form::hidden('id', 1) !!}                                <button type="button" class="btn btn-default"                                        data-dismiss="modal">{{ trans('admin.cancel') }}</button>                                <button type="submit"                                        class="btn btn-warning">{{ trans('admin.delete') }}</button> {!! Form::close() !!}                            </div>                        </div><!-- /.modal-content --> </div><!-- /.modal-dialog --> </div><!-- /.modal -->            </table> {{ $orders->links() }}        </div>        <div class="paginator">        </div>    </div></div><script> function deleteProducts($id, $name) {        $('.modal-title').html($name);        $('.modal_name').html($name);        $('input[name="id"]').val($id);        $('.delete_dialog').modal();    } </script>@stop@section('script')    <script src="{{asset('adminLTE/plugins/date/bootstrap-datepicker.min.js')}}"></script>    <script src="{{asset('assets/js/jquery.simplePagination.js')}}"></script>    <script>        <!--        $('.date').datepicker({            pickTime: false,            format: "dd.mm.yyyy",            autoclose: true,        });        //-->        function filter($page) {            var data = {};           var $url = '{!! Request::url()!!}/filter';            var $url_set = 0;            var $form = $('#form_filtre');            $.each($('#form_filtre').serializeArray(), function () {                data[this.name] = this.value;            });           data['lang'] = "{{Lang::getLocale()}}";            data['page'] = $page;            $('#loading_img').show();            $.ajax({                url: $url,                type: 'POST',                data: data,                dataType: 'JSON',                success: function (data) {                    $('.order_list').html(data['html']);                    $('.pagination').remove();                    if(data['total'] >20 ){                        $('.paginator').pagination({items: data['total'], itemsOnPage: '20', currentPage: data['active']});                        $('.pg').hide();                        $('.pagination-arrow').remove();                        $('.prev').html('«');                        $('.next').html('»');                    }                    $('#loading_img').hide();                }            });        }        function setPage($val, $page) {            filter($page)        }    </script>@stop