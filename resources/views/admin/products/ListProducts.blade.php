@extends('admin.layouts')@section('content')    <style> #loading_img {            width: 100%;            height: 100%;            position: fixed;            z-index: 99999;            top: 0;            left: 0;            background: #fff;            opacity: .5;            display: none;        } </style> <?php $name = "name_" . Lang::getLocale(); $lang = Lang::getLocale(); ?>    <div class="box box-primary">        <div class="box-body">            <div class="page-header"> @lang('admin.list_products') </div>            <div class="success"> @if(session('success'))                    <div class="alert alert-success fade in " id="alert-message" style="font-size: 14px;"><a                                class="close" href="#" data-dismiss="alert">x</a> <i                                class="fa fa-check-circle"></i> {!! session('success') !!} {!! Session::forget('success') !!}                    </div> @endif </div>            <div class="box-body pad table-responsive">                <div class="add_carousel"><a href="{!! URL::route('add_product') !!}">                        <button class="btn btn-primary btn-add"><i                                    class="glyphicon-plus"></i> @lang('admin.add_product')</button>                    </a></div>                <div class="well">                    <div class="row"> {!! Form::open(['id'=>'form_filtre']) !!}                        <div class="col-sm-4">                            <div class="form-group"><label for="filter_name">@lang('admin.name_product')</label> <input                                        type="text" name="filter_name" autocomplete="off" class="form-control"                                        placeholder="@lang('admin.name_product')"></div>                            <div class="form-group"><label for="model">@lang('admin.model')</label> <input type="text"                                                                                                           name="filter_model"                                                                                                           autocomplete="off"                                                                                                           class="form-control"                                                                                                           placeholder="@lang('admin.model')">                            </div>                        </div>                        <div class="col-sm-4">                            <div class="form-group"><label for="price">@lang('admin.price_min')</label> <input                                        type="number" name="filter_price_min" autocomplete="off" class="form-control"                                        placeholder="@lang('admin.price_min')"></div>                            <div class="form-group"><label for="price">@lang('admin.price_max')</label> <input                                        type="number" name="filter_price_max" autocomplete="off" class="form-control"                                        placeholder="@lang('admin.price_max')"></div>                        </div>                        <div class="col-sm-4">                            <div class="form-group"><label for="price">@lang('admin.status')</label> <select                                        name="filter_status" id="select" class="form-control">                                    <option value=""></option>                                    <option value="1">@lang('admin.enable')</option>                                    <option value="0">@lang('admin.disable')</option>                                </select></div>                            <button type="button" id="button-filter" onclick="filter(1)"                                    class="btn btn-primary pull-right"><i                                        class="fa fa-search"></i> @lang('admin.filter')</button>                        </div> {!! Form::close() !!} </div>                </div>                <table class="table table-bordered table-hover">                    <thead>                    <tr>                        <th>@lang('admin.name_product') </th>                        <th>{!! trans('admin.image') !!}</th>                        <th>{!! trans('admin.model') !!}</th>                        <th>{!! trans('admin.price') !!}</th>                        <th class="text-center" style="width: 10%">{!! trans('admin.actions') !!}</th>                        <th class="text-center" style="width: 10%">{!! trans('admin.status') !!}</th>                    </tr>                    </thead>                    <tbody class="product_list"> @foreach($products as $product)                        <tr> <?php $id = $product->id ?>                            <td> {!! $product->$name !!} </td>                            <td class="image_product">                                @if ( !empty( $product->image ) && file_exists(public_path() . '/images/products/thumb_'.$product->image))                                    <img src="{!! asset('/images/products/thumb_'.$product->image) !!}" alt=""> @else                                    <img src="{!! asset('assets/nope.png') !!}"                                         alt=""> @endif                            </td>                            <td> {!! $product->article !!} </td>                            <td> @if($product->discount_price) <span                                        style="text-decoration: line-through;">{!! $product->price !!} @lang('admin.mdl')</span>                                <br>                                <div class="text-danger">{!! $product->discount_price !!} @lang('admin.mdl')</div> @else                                    <span>{!! $product->price !!} @lang('admin.mdl')</span><br> @endif </td>                            <td class="text-center"><a href="{!! asset('admin/product/edit'.'/'.$id) !!}">                                    <div data-toggle="modal" data-target="#edit_{{$id}}"                                         class="edit-pencil btn btn-primary btn-xs"><span                                                class="glyphicon glyphicon-pencil"></span></div>                                </a>                                <div data-toggle="modal"                                     onclick="deleteProducts('{{$product->id}}','{{$product->$name}}')"                                     data-target="#delete_{{$id}}" class="delete-trash btn btn-danger btn-xs"><span                                            class="glyphicon glyphicon-trash"></span></div>                            </td>                            <td class="text-center"> @if($product->status == 0) <span                                        class="status-no-active "></span> @else <span                                        class="status-active"></span> @endif </td>                        </tr> @endforeach </tbody>                    <div class="modal fade delete_dialog" role="dialog">                        <div class="modal-dialog modal-sm">                            <div class="modal-content">                                <div class="modal-header">                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                                aria-hidden="true">&times;</span></button>                                    <h4 class="modal-title"></h4></div>                                <div class="modal-body"> {{ trans('admin.sure-delete') }} - <strong                                            class="modal_name"></strong> ?                                </div>                                <div class="modal-footer">                                    <div class="clearfix"></div> {!! Form::open(['method' => 'DELETE']) !!} {!! Form::hidden('id', 1) !!}                                    <button type="button" class="btn btn-default"                                            data-dismiss="modal">{{ trans('admin.cancel') }}</button>                                    <button type="submit"                                            class="btn btn-warning">{{ trans('admin.delete') }}</button> {!! Form::close() !!}                                </div>                            </div><!-- /.modal-content -->                        </div><!-- /.modal-dialog -->                    </div><!-- /.modal -->                </table>                <div class="pg"> {{ $products->links() }} </div>                <div class="paginator"></div>            </div>        </div>    </div>    <style> .image_product img {            width: 50px;            border: 1px solid #ddd;            border-radius: 3px;        }        span.status-active {            width: 10px;            height: 10px;            display: inline-block;            border-radius: 100%;            background: #51bb11;        }        span.status-no-active {            width: 10px;            height: 10px;            display: inline-block;            border-radius: 100%;            background: #dd4b39;        }        .pagination>li>a, .pagination>li>span {            border: none;        }    </style>@stop @section('script')<script src="{{asset('adminLTE/jquery.simplePagination.js')}}"></script><script> function filter($page) {        var data = {};        var $url = '{!! Request::url()!!}/fi';        var $url_set = 0;        var $form = $('#form_filtre');        var $filter_prod = $('input[name="filter_name"]').val();        var $price_min = $('input[name="filter_price_min"]').val();        var $price_max = $('input[name="filter_price_max"]').val();        var $model = $('input[name="filter_model"]').val();        var $stock = $('input[name="filter_stock"]').val();        var $status = $('select[name="filter_status"]').val();        $.each($('#form_filtre').serializeArray(), function () {            data[this.name] = this.value;        });        data['lang'] = "{!! $lang !!}";        data['page'] = $page;        $('#loading_img').show();        $.ajax({            url: $url,            type: 'POST',            _token: $('input[name="_token"]').val(),            data: data,            dataType: 'JSON',            success: function (data) {                $('.product_list').html(data['prod']);                $('.paginator').pagination({items: data['total'], itemsOnPage: '35', currentPage: data['active']});                $('.pg').hide();                $('#loading_img').hide();            }        });    }    function deleteProducts($id, $name) {        $('.modal-title').html($name);        $('.modal_name').html($name);        $('input[name="id"]').val($id);        $('.delete_dialog').modal();    }    function setPage($val, $page) {        filter($page)    } </script> @stop