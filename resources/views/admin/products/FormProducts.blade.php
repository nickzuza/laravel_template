@extends('admin.layouts')@section('content')    <?php        $name = "name_".Lang::Locale();    ?>    <?php    $units = \App\Models\Units::get();    ?>    <style>        .form-group .control-label        {            text-align: right;            font-weight: 400;            margin-top: 7px;        }        div .control-label        {   text-align: right;            font-weight: 400;            margin-top: 7px;        }    </style>    <div class="box box-primary">        <div class="box-body">            <div class="page-header">                @if(isset($product))                    @lang('admin.edit_product')                @else                    @lang('admin.add_product')                @endif            </div>            <div class="errors">                @if(isset($errors) && count($errors->all()) > 0)                    <div class="alert alert-danger fade in alert-error" id="alert-message">                        <a class="close" href="#" data-dismiss="alert">x</a>                        <ul style="list-style-type: none">                            <li>@lang('error.required')</li>                        </ul>                    </div>                @endif                @if(session('success'))                    <div class="alert alert-success fade in " id="alert-message" style="font-size: 14px;">                        <a class="close" href="#" data-dismiss="alert">x</a>                        <i class="fa fa-check-circle"></i>                        {!! session('success') !!}                        {!! Session::forget('success') !!}                    </div>                @endif            </div>{{--session success/errors--}}            <div class="box-body pad table-responsive about_class">                {!! Form::open(['method'=>'POST','name'=>'Form-addCategory','files'=>true]) !!}                <div class="nav-tabs-custom">                    <ul class="nav nav-tabs">                        <li id="prev_tab" class="active"><a href="#general"  data-toggle="tab">Основное</a></li>                        <li id="next_tab"><a href="#tab-data"  data-toggle="tab">Данные</a></li>                    </ul>                </div>                <div class="tab-content">                    <div class="tab-pane active" id="general">                        <div class="nav-tabs-custom">                            <ul class="nav nav-tabs">                                <?php $inc = 0 ?>                                @foreach($lang_data as $lang)                                    <li class="@if(! $inc ) active @endif">                                        <a href="#tab_{!! $lang!!}" data-toggle="tab">                                            {!! HTML::image("adminLTE/images/icon-".$lang.".png") !!}                                        </a>                                        <?php $inc++;?>                                    </li>                                @endforeach                            </ul>                            <div class="tab-content">                                <?php $inc = 0?>                                @foreach($lang_data as $lang)                                    <?php                                        $name_pr = 'name_'.$lang;                                        $meta_name = 'meta_name_'.$lang;                                        $description = 'description_'.$lang;                                        $meta_description = 'meta_description_'.$lang;                                    ?>                                    <div class="tab-pane @if(!$inc) active @endif" id="tab_{{$lang}}">                                        <div class="form-group row required">                                            <label class="col-sm-2 control-label"><span class="red">*</span>{!! trans('admin.name_product') !!}</label>                                            <div class="col-sm-10"  @if($errors->has($name_pr)) id="has_errors" @endif>                                                <?php                                                $data = isset( $product )? $product->$name_pr:'';                                                $data = old($name_pr,$data);                                                ?>                                                <input type="text" placeholder="{!! trans('admin.name_product') !!}" name="{{$name_pr}}"  value="{{$data}}" class="form-control" >                                                <span class="errors">{!!  $errors->first($name_pr) !!}</span>                                            </div>                                        </div>{{--Name Product--}}                                        <div class="form-group row required">                                            <label class="col-sm-2 control-label"><span class="red">*</span>@lang('admin.meta_title')</label>                                            <div class="col-sm-10" @if($errors->has($meta_name)) id="has_errors" @endif>                                                <?php                                                $data = isset( $product )? $product->$meta_name:'';                                                $data = old($meta_name,$data);                                                ?>                                                <input type="text" name="{{$meta_name}}" value="{{$data}}" class="form-control" placeholder="@lang('admin.meta_title')"/>                                                <span class="errors">{!!  $errors->first($meta_name) !!}</span>                                            </div>                                        </div>{{--Meta Title--}}                                        <div class="form-group row required">                                            <label class="col-sm-2 control-label">@lang('admin.meta_description')</label>                                            <div class="col-sm-10">                                                <?php                                                $data = isset( $product )? $product->$meta_description:'';                                                $data = old($meta_description,$data);                                                ?>                                                    <input type="text" name="{{$meta_description}}" value="{{$data}}" class="form-control" placeholder="@lang('admin.meta_description')"/>                                            </div>                                        </div>{{--Meta Description--}}                                        <div class="form-group row required">                                            <label class="col-sm-2 control-label">{!! trans('admin.product_description') !!}</label>                                            <div class="col-sm-10">                                                <?php                                                $data = isset( $product )? $product->$description:'';                                                $data = old($description,$data);                                                ?>                                                <textarea type="text" name="{{$description}}" placeholder="{!! trans('admin.product_description') !!}" style="height: 250px" class="form-control" />{{$data}}</textarea>                                            </div>                                        </div>{{--Description--}}                                    </div> {{--Final Tabe Pane --}}                                    <?php $inc++ ?>                                @endforeach                                <a href="#tab-data" data-toggle="tab"> <input id="next" type="submit" value="{!! trans('admin.next') !!}" class="btn btn-primary btn-save" ></a>                            </div>{{--Final tab content--}}                        </div>                    </div>{{--General--}}                    <div class="tab-pane " id="tab-data">                        <div class="form-group row" style="margin-bottom: 15px;">                            <label for="article" class="col-sm-2 control-label"><span>*</span>{!! trans('admin.article') !!}</label>                            <div class="col-sm-10" @if($errors->has('article')) id="has_errors" @endif>                                <?php                                    $data = isset( $product )? $product->article:'';                                    $data = old('article',$data);                                ?>                                <input type="text"  name="article" value="{{$data}}" class="form-control" placeholder="@lang('admin.article')">                                <span class="errors">{!!  $errors->first('article') !!}</span>                            </div>                        </div>{{--Article--}}                        <div class="form-group row" style="margin-bottom: 15px;">                            <label for="price" class="col-sm-2 control-label"><span>*</span>{!! trans('admin.price') !!}</label>                            <div class="col-sm-10" @if($errors->has('price')) id="has_errors" @endif>                                <?php                                $data = isset( $product )? $product->price:'';                                $data = old('price',$data);                                ?>                                <input type="number" step="0.01" name="price" value="{{$data}}" class="form-control" placeholder="@lang('admin.price')">                                <span class="errors">{!!  $errors->first('price') !!}</span>                            </div>                        </div>{{--Price--}}                        <div class="form-group row" style="margin-bottom: 15px;">                            <label for="discount_price" class="col-sm-2 control-label">{!! trans('admin.discount') !!}</label>                            <div class="col-sm-10" @if($errors->has('discount_price')) id="has_errors" @endif>                                <?php                                $data = isset( $product )? $product->discount_price:'';                                $data = old('discount_price',$data);                                ?>                                <input type="number" step="0.01" name="discount_price" value="{{$data}}" class="form-control" placeholder="@lang('admin.discount_price')">                                <span class="errors">{!!  $errors->first('discount_price') !!}</span>                            </div>                        </div>{{--Discount Price--}}                        <div class="form-group row required">                            <label class="col-sm-2 control-label"><span>*</span>{!! trans('admin.select_category') !!}</label>                            <div class="col-sm-10" @if($errors->has('category_id')) id="has_errors" @endif>                                <select name="category_id" id="category_product" class=" select2">                                    <option value="0" disabled selected>@lang('admin.select_category')</option>                                    <?php                                    $data = isset($product)? $product->category_id :"";                                    $data = old('category_id',$data)                                    ?>                                    @foreach($categories as $level1)                                        @if(isset($level1['level2']) && count($level1['level2']))                                            @foreach($level1['level2'] as $level2)                                                @if(isset($level2['level3']) && count($level2['level3']))                                                    @foreach($level2['level3'] as $level3)                                                        @if(isset($level3['level4']) && count($level3['level4']))                                                            @foreach($level3['level4'] as $level4)                                                                @if(isset($level4['level5']) && count($level4['level5']))                                                                    @foreach($level4['level5'] as  $level5)                                                                        <option @if($data == $level5->id) ) selected @endif value="{{$level5->id}}">{{$level5->$name}}</option>                                                                     @endforeach                                                                @else                                                                    <option @if($data == $level4->id) ) selected @endif value="{{$level4->id}}">{{$level4->$name}}</option>                                                                @endif                                                            @endforeach                                                        @else                                                            <option @if($data == $level3->id) ) selected @endif value="{{$level3->id}}">{{$level3->$name}}</option>                                                        @endif                                                    @endforeach                                                @else                                                    <option @if($data == $level2->id) ) selected @endif value="{{$level2->id}}">{{$level2->$name}}</option>                                                @endif                                            @endforeach                                        @else                                            <option @if($data == $level1->id) ) selected @endif value="{{$level1->id}}">{{$level1->$name}}</option>                                        @endif                                    @endforeach                                </select>                                <span class="errors">{!!  $errors->first('category_id') !!}</span>                            </div>                        </div>  {{-- List with all category last level --}}                        <div class="form-group row ">                            <label class="col-sm-2 control-label image_name" >{!! trans('admin.image') !!}</label>                            <div class="col-sm-10" @if($errors->has('files')) id="has_errors" @endif>                                <input type="file" @if(!isset($product)) @endif onchange="readURL(this)" name="files[]"  class="form-control" multiple = "true" accept="image/*">                                <div class="errors" style="margin: 1em">{!!  $errors->first('files') !!}</div>                                @if(isset($product))                                <?php                                    $image = \App\Models\ProductImage::where(['product_id'=>$product->id])->get();                                ?>                                    @if(count($image))                                        @foreach($image as $img)                                            <div class="image-color image">                                                <i style="cursor: pointer;" onclick="resetImage('{!! $img->id !!}',this)" class="fa fa-undo layer-text" aria-hidden="true"></i>                                                    <div class="delete" onclick="deleteImage('{!! $img->id !!}',this)">x</div>                                                    {!! HTML::image('images/products/thumb_'.$img->image,'',['style' => 'width: 60px; height: 60px;']) !!}                                                    <input type="radio" required @if($img->default) checked  @endif name="image_default" value="{{$img->image}}">                                            </div>                                        @endforeach                                    @endif                                @endif                                <div id="upload_image"></div>                            </div>                        </div>                        <div class="form-group row required">                             <label class="col-sm-2 control-label">@lang('admin.tehnical')</label>                             <div class="col-sm-10">                                 <div class="tehnical" style="background-color: #F5F5F5;padding: 15px; min-height: 50px">                                     <table class="table table-boardered table-hover">                                         <thead>                                              <td style="width: 185px;">@lang('admin.name_caracteristic')</td>                                              <td>@lang('admin.value_caracteristic')(RU)</td>                                              <td>@lang('admin.value_caracteristic')(RO)</td>                                              <td style="width: 100px">@lang('admin.unit_caracteristic')</td>                                              <td style="width: 100px" class="text-right">@lang('admin.show_home')</td>                                              <td style="width: 10px" class="text-right"></td>                                         </thead>                                         @if(isset($product))                                             <?php                                             $active_caracteristic = \App\Models\ProductCaracteristic::where('product_id',$product->id)->get();                                             $active_caracteristic = DB::table('caracteristic')                                                     ->join('product_caracteristic','caracteristic.id','=','product_caracteristic.caracterisitc_id')                                                     ->where('product_id',$product->id)                                                     ->get();                                             $active_c = [];                                                 foreach ($active_caracteristic as $item){                                                     array_push($active_c,$item->caracterisitc_id);                                                 }                                                 $caracteristic = DB::table('caracteristic')                                                     ->join('caracteristic_category','caracteristic.id','=','caracteristic_category.caracterisitc_id')                                                     ->where('caracteristic_category.category_id',$product->category_id)->get();                                         ?>                                         @endif                                     <tbody id="special">                                         @if( isset($active_c) && count($active_c))                                         @foreach($active_caracteristic as $item)                                             @if(in_array($item->caracterisitc_id,$active_c))                                             <tr id="row_{{$item->caracterisitc_id}}" data-row="1">                                                 <td class="" data-row="1">                                                     <input type="hidden" class="form-control" name="car_id[]" value="{{$item->caracterisitc_id}}">                                                     <span>{{$item->$name}}</span>                                                 </td>                                                 <td data-row="1" id="col_1">                                                     <input type="text" value="{{$item->value_ru}}" class="form-control" name="value_ru[{{$item->caracterisitc_id}}]" style="margin-bottom:3px;"></td>                                                 <td data-row="1" id="col_1"><input type="text" value="{{$item->value_ro}}" class="form-control" name="value_ro[{{$item->caracterisitc_id}}]" style="margin-bottom:3px;"></td>                                                 <td class="text-right" style="max-width: 100px">                                                     <select class="form-control" name="unit_id[{{$item->caracterisitc_id}}]">                                                        <option value="">-</option>                                                        @foreach ($units as $unit)                                                            <option @if($unit->id == $item->unit_id) selected @endif value="{{$unit->id}}">{{$unit->$name}}</option>                                                        @endforeach                                                     </select>                                                 </td>                                                 <td class="text-center"><input name="check[]" @if($item->home) checked @endif class="check" value="{{$item->caracterisitc_id}}" type="checkbox"></td>                                                 <td class="text-left"><button type="button" onclick="deleteCh({{$item->caracterisitc_id}})" data-toggle="tooltip" title="Remove" class="btn btn-danger">                                                         <i class="fa fa-minus-circle"></i>                                                     </button>                                                 </td>                                             </tr>                                             @endif                                         @endforeach                                         @endif                                     </tbody>                                     </table>                                     <table class="table table-bordered table-hover">                                         <tr>                                             <td>                                                 <select name="list_caracteristic" id="ch_select" class="select2">                                                         @if( isset($caracteristic) && count($caracteristic)))                                                            @if(!isset($active_c)))                                                                <?php $active_c  = []; ?>                                                            @endif                                                             @foreach($caracteristic as $item)                                                                <option @if(in_array($item->caracterisitc_id,$active_c))) disabled @endif value="{{$item->caracterisitc_id}}">{{$item->$name}}</option>                                                              @endforeach                                                         @endif                                                 </select>                                             </td>                                             <td width="15px">                                                 <div class="text-right"><button type="button" onclick="addSpecial();" data-toggle="tooltip" title="" class="btn btn-primary" data-original-title="Add Caracteristic">                                                         <i class="fa fa-plus-circle"></i> Добавить                                                     </button>                                                 </div>                                             </td>                                         </tr>                                     </table>                                 </div>                             </div>                         </div>                        <div class="form-group row required">                             <label class="col-sm-2 control-label">@lang('admin.filter')</label>                             <div class="col-sm-10">                                 <div class="filter" style="background-color: #F5F5F5;padding: 15px; min-height: 50px">                                     <table class="table table-striped">                                         @if(isset($product))                                         <?php                                             $filters = DB::table('filter')                                                 ->join('category_filter', 'filter.id', '=', 'category_filter.filter_id')                                                 ->where('category_filter.category_id', $product->category_id)                                                 ->orderBy('filter.id', 'desc')                                                 ->groupBy('filter.id')                                                 ->get();                                             $select = \App\Models\ProductFilter::where(['product_id'=>$product->id])->get();                                              $filter_f = [];                                              $filter_v = [];                                          foreach ($select as $v){                                              array_push($filter_f,$v->filter_id);                                              array_push($filter_v,$v->value);                                          }                                         ?>                                      <div>                                         @foreach ($filters as $filter)                                             <div class="col-md-9">                                             <?php $prop = \App\Models\FilterProperties::where('filter_id',$filter->filter_id)->get(); ?>                                                     <h3>{{$filter->$name}}</h3>                                                     <?php $i = 0; $cout = count($prop);?>                                                     @foreach ($prop as $item)                                                         @if ($filter->type == 2)                                                         <?php $i++; ?>                                                             @if($i == 1)                                                                <input type='radio' checked name='interval[{{$filter->filter_id}}]' value='0'>@lang('admin.no-select')<br>                                                             @endif                                                            @if(!empty($filter_f) && in_array($filter->filter_id,$filter_f) && in_array($item->id,$filter_v))                                                                <input type='radio' checked name='interval[{{$filter->filter_id}}]' value='{{$item->id}}'>{{$item->$name}}<br>                                                                 @if($cout <= $i)                                                                     @if(in_array($filter->filter_id,$filter_f))                                                                         <?php                                                                         if(in_array($filter->filter_id,$filter_f)){$data =  App\Models\ProductFilter::where('filter_id',$filter->filter_id)->where('product_id',$product->id)->first()->value2;}else{$data = "";}                                                                         ?>                                                                         <input type='number' value="{{$data}}" name='interval_val[{{$filter->filter_id}}]'><br>                                                                     @else                                                                         <input type='number' name='interval_val[{{$filter->filter_id}}]'><br>                                                                     @endif                                                                 @endif                                                             @else                                                                <input type='radio' name='interval[{{$filter->filter_id}}]' value='{{$item->id}}'>{{$item->$name}}<br>                                                             @if($cout <= $i)                                                                     @if(in_array($filter->filter_id,$filter_f))                                                                         <?php                                                                                 if(in_array($filter->filter_id,$filter_f)){$data =  App\Models\ProductFilter::where('filter_id',$filter->filter_id)->where('product_id',$product->id)->first()->value2;}else{$data = "";}                                                                             ?>                                                                         <input type='number' value="{{$data}}" name='interval_val[{{$filter->filter_id}}]'><br>                                                                      @else                                                                             <input type='number' name='interval_val[{{$filter->filter_id}}]'><br>                                                                      @endif                                                             @endif                                                             @endif                                                         @else                                                             @if(!empty($filter_f) && in_array($filter->filter_id,$filter_f) && in_array($item->id,$filter_v))                                                                <input type='checkbox' checked name='filter[{{$filter->filter_id}}][]' value='{{$item->id}}'>{{$item->$name}}<br>                                                             @else                                                                 <input type='checkbox' name='filter[{{$filter->filter_id}}][]' value='{{$item->id}}'>{{$item->$name}}<br>                                                             @endif                                                          @endif                                                     @endforeach                                             </div>                                             <div class="col-md-3">                                                 <h4>@lang('admin.priority')</h4>                                                     <input name="check_filter[]" @if(count($home) && in_array($filter->filter_id,$home) ) checked  @endif class="check" value="{{$filter->filter_id}}" type="checkbox">                                             </div>                                         @endforeach                                      </div>                                 <div class='clearfix'></div>                                     @endif                                     </table>                                 </div>                             </div>                         </div>                        <div class="form-group row">                             <label class="col-sm-2 control-label">{!! trans('admin.status') !!}</label>                             <div class="col-sm-10">                                 <select name="status" id="status" class="form-control">                                     <option value="1" @if(isset($product->status) && $product->status == 1) selected @endif >@lang('admin.enable')</option>                                     <option value="0" @if(isset($product->status) && $product->status == 0) selected @endif >@lang('admin.disable')</option>                                 </select>                             </div>                         </div> {{--Status--}}                        <input type="submit" value="{!! trans('admin.save') !!}" class="btn btn-primary btn-save">                        <a href="#general" data-toggle="tab" aria-expanded="false">                        <input type="submit" id="prev" class="btn btn-primary btn-save" value="{!! trans('admin.prev') !!}"></a>                    </div>                    <input type="hidden" name="_Token" value="{{ csrf_token() }}">                    @if(isset($product))                        <input type="hidden" name="id" value="{{$product->id }}">                        <input type="hidden" name="img" value="">                     @endif                    <div class="clear" style="clear: both;"></div>                </div>{{--tab-content--}}            </div>        </div>    </div>    {!! Form::close() !!}    <div class="modal fade" tabindex="-1" role="dialog" id="delete_image">        <div class="modal-dialog modal-sm">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                    <div class="modal-body">                        {{ trans('admin.sure-delete') }}  ?                    </div>                    {!! Form::open(['class'=>'deleteProduct']) !!}                    <div class="modal-footer">                        {!! Form::hidden('id','',['id' => 'delete_id']) !!}                        {{ method_field('DELETE') }}                        <button type="button" class="btn btn-default" data-dismiss="modal">{{ trans('admin.cancel') }}</button>                        <button type="submit" class="btn btn-warning"> {{ trans('admin.delete') }} </button>                    </div> {{-- Modal Footer--}}                    {!! Form::close() !!}                </div> {{-- Modal content--}}            </div>        </div>    </div><!-- /.content-wrapper -->    <style>        .select2-container {            width: 100%!important;        }    </style>@stop@section('script')    <script src="{!! asset('adminLTE/plugins/select2/select2.min.js') !!}"></script><script>    $(document).ready(function () {        $('#category_product').select2();    });    $(document).ready(function () {        $('.select2').select2();    });</script><script>    $('select[name=category_id]').change(function () {        var arrNumber = $(this).val();        var token = $('input[name=_token]').val();        var url = '{!! URL::route('get_caracteristics') !!}';        var data = {category: arrNumber};        $.ajax({            url: url,            headers: {'X-CSRF-TOKEN': token},            data: data,            type: 'POST',            datatype: 'JSON',            success: function (request) {                $('#special').html(" ");                $('#ch_select').html(" ");                $('#ch_select').append(request);                $(".select2").select2();            }        });        $.ajax({            url: '{!! URL::route('get_filter') !!}',            headers: {'X-CSRF-TOKEN': token},            data: data,            type: 'POST',            datatype: 'JSON',            success: function (request) {                $('.filter').html(" ");                $('.filter').append(request);                $('.check').change(function () {                    if( $('.check:checked').length >= 5 ){                        $('.check:not(:checked)').attr('disabled',true);                    }else                    {                        $('.check').removeAttr('disabled');                    }                })            }        });    });    @if(!isset($product) && old('category_id'))    var arrNumber = "{!! old('category_id') !!}";    var token = $('input[name=_token]').val();    var url = '{!! URL::route('get_caracteristics') !!}';    var data = {category: arrNumber};    $.ajax({        url: url,        headers: {'X-CSRF-TOKEN': token},        data: data,        type: 'POST',        datatype: 'JSON',        success: function (request) {            $('#special').html(" ");            $('#ch_select').html(" ");            $('#ch_select').append(request);            $(".select2").select2();            $('.check').change(function () {                if( $('.check:checked').length >= 5 ){                    $('.check:not(:checked)').attr('disabled',true);                }else                {                    $('.check').removeAttr('disabled');                }            })        }    });    $.ajax({        url: '{!! URL::route('get_filter') !!}',        headers: {'X-CSRF-TOKEN': token},        data: data,        type: 'POST',        datatype: 'JSON',        success: function (request) {            $('.filter').html(" ");            $('.filter').append(request);        }    });    @endif            $('document').ready(function () {        $('#next').click(function () {            $('#prev_tab').removeClass('active');            $('#next_tab').addClass('active');        });        $('#prev').click(function () {            $('#prev_tab').addClass('active');            $('#next_tab').removeClass('active');        })    });    $('input[name="discount"]').on('change', function(){        var $th  = $(this);        if( $th.is(':checked')){            $('.discount').show();        } else {            $('.discount').hide();        }    });    var arr_image = [];    function deleteImage(img,event){        var par = $(event).parent();        par.addClass('layer');        par.find('input[name="image_default"]').attr('checked',false).hide();        arr_image.push(img);        $('input[name="img"]').val(arr_image)    }    function resetImage(img,event){        var index = arr_image.indexOf(img);        if (index > -1) {            arr_image.splice(index, 1);        }        var par = $(event).parent();        par.removeClass('layer');        par.find('input[name="image_default"]').show();        $('input[name="img"]').val(arr_image);    }</script><script>    $('.check').change(function () {        if( $('.check:checked').length >= 5 ){            $('.check:not(:checked)').attr('disabled',true);        }else{            $('.check').removeAttr('disabled');        }    });    if( $('.check:checked').length >= 5 ){        $('.check:not(:checked)').attr('disabled',true);    }    CKEDITOR.replace('description_ru', {height: 200});    CKEDITOR.replace('description_ro', {height: 200});</script><script>    function readURL(input) {        var files = input.files; // FileList object        $('#upload_image').html('');        // Loop through the FileList and render image files as thumbnails.        for (var i = 0, f; f = files[i]; i++) {            // Only process image files.            if (!f.type.match('image.*')) {                continue;            }            var reader = new FileReader();            // Closure to capture the file information.            reader.onload = (function(theFile) {                return function(e) {                    var txt=decodeURI(theFile.name);                    $('#upload_image').append("<div class='image-color radio_upload'><img style='width: 60px; height: 60px;' src='"+e.target.result+"' class='img-upload img-responsive'><input type='radio' required value='"+txt+"' name='image_default'></div>");                };            })(f);            // Read in the image file as a data URL.            reader.readAsDataURL(f);        }    }</script>    {{--Product Caracteristic--}}    <script>        var special_row = 1;        function addSpecial() {            var $select = $('#ch_select option:selected');            var id      = $select.val();            var name    = $select.text();            if ($select.attr('disabled') == undefined) {                if (id > 0) {                    html = '<tr  id="row_' + id + '" data-row="' + special_row + '">';                    html += '<td class="" data-row="' + special_row + '">  <input type="hidden" class="form-control" name="car_id[]" value="'+id+'">';                    html += '<span>' + name + '</span>';                    html += '</td>';                    html += '<td data-row="' + special_row + '" id="col_' + special_row + '">';                    html += '<input type="text" class="form-control" name="value_ru['+id+']" style="margin-bottom:3px;">';                    html += '</td>';                    html += '<td data-row="' + special_row + '" id="col_' + special_row + '">';                    html += '<input type="text" class="form-control" name="value_ro['+id+']" style="margin-bottom:3px;">';                    html += '</td>';                    html += '<td class="text-right" style="max-width: 100px">';                    html += '<select class="form-control" name="unit_id['+id+']">';                    html += '<option value="0">-</option>';                        @foreach ($units as $unit)                            html += '<option value="{{$unit->id}}">{{$unit->$name}}</option>';                        @endforeach                    html += ' </select>';                    html += '</td>';                    html += '<td class="text-center" ><input name="check[]" class="check" value="' + id + '" type="checkbox"></td>';                    html += '<td class="text-left"><button type="button" onclick="deleteCh('+id+')" data-toggle="tooltip" title="Remove" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';                    html += '</tr>';                    $select.attr('disabled', 'disabled');                    $('#special').append(html);                    special_row++;                }            }            $(".select2").select2();        }    </script>    {{--Product Caracteristic--}}    <script>        $(function(){            $(".select2").select2();        });        function deleteCh(id) {            $('#row_' + id).remove();            $('#ch_select option[value="' + id + '"]').removeAttr('disabled');            $(".select2").select2();        }    </script>@stop